<?xml version="1.0" encoding="UTF-8"?>

<schema name="default-config" version="1.6">
  <uniqueKey>url</uniqueKey>

  <fieldType name="title_en" class="solr.TextField" positionIncrementGap="100">

    <analyzer>
      <charFilter class="solr.PatternReplaceCharFilterFactory"
                  pattern="\\#"
                  replacement="sharp"/>
      <charFilter class="solr.PatternReplaceCharFilterFactory"
                  pattern="\\+\\+"
                  replacement="plusplus"/>
      <!-- remove dots so "3.12" → "312" -->
      <charFilter class="solr.PatternReplaceCharFilterFactory"
              pattern="\\."
              replacement=""/>
      <tokenizer class="solr.StandardTokenizerFactory"/>
      <filter class="solr.LowerCaseFilterFactory"/>
      <!--  match python3 or python3.12 -->
      <filter class="solr.WordDelimiterGraphFilterFactory"
              generateWordParts="1"
              generateNumberParts="1"
              catenateWords="1"
              catenateNumbers="1"
              splitOnCaseChange="1"
              splitOnNumerics="1"
              preserveOriginal="1"/>
      <filter class="solr.SnowballPorterFilterFactory"/>
    </analyzer>
  </fieldType>

  <fieldType name="text_en_prog" class="solr.TextField" positionIncrementGap="100">
    <analyzer>
      <tokenizer class="solr.StandardTokenizerFactory"/>
      <filter class="solr.LowerCaseFilterFactory"/>
      <filter class="solr.SynonymGraphFilterFactory"
              expand="true"
              ignoreCase="true"
              synonyms="synonyms_prog_en.txt"/>
      <filter class="solr.StopFilterFactory"
              words="stopwords_prog_en.txt"
              ignoreCase="true"/>
      <!-- Leichter englischer Stemmer (kein Porter, um Fachbegriffe zu schonen) -->
      <filter class="solr.EnglishMinimalStemFilterFactory"/>
      <!-- ASCII-Folding, damit “résumé” ≙ “resume” etc. -->
      <filter class="solr.ASCIIFoldingFilterFactory"
              preserveOriginal="true"/>
    </analyzer>
  </fieldType>

  <fieldType name="string" class="solr.StrField" sortMissingLast="true" docValues="true"/>

  <dynamicField name="*" type="text_en_prog" indexed="true" stored="true"/>

  <field name="url"      type="string"  indexed="true"  stored="true" required="true"/>
  <field name="title"    type="title_en"  indexed="true"  stored="true"/>
  <field name="document" type="text_en_prog"  indexed="true"  stored="true"/>

  <field name="catch_all" type="text_en_prog" stored="true" multiValued="true"/>
  <copyField source="*" dest="catch_all"/>
 

</schema>

